# Monitoring

* Hosted on: `monitoring.infra.rust-lang.org` (behind the bastion)
* Maintainers: [pietroalbini], infra team

## Service configuration

Our monitoring service is composed of three parts: [Prometheus] to scrape,
collect and monitor metrics, [Alertmanager] to dispatch the alerts generated by
Prometheus, and [Grafana] to display the metrics. All the parts are configured
through [Ansible].

The metrics are not backed up, as Prometheus purges them after 7 days anyway,
but the Grafana dashboards are stored in a PostgreSQL database, which is backed
up with [restic] in the `rust-backups` bucket (`monitoring` subdirectory). The
password to decrypt the backups is in 1password.

TODO

## Common maintenance procedures

### Scrape a new metrics source

TODO

### Create a new alert

TODO

### Add permissions to a user

TODO

[pietroalbini]: https://github.com/pietroalbini
[Prometheus]: https://prometheus.io
[Alertmanager]: https://prometheus.io/docs/alerting/alertmanager/
[Grafana]: https://grafana.com
[Ansible]: https://github.com/rust-lang/simpleinfra/tree/master/ansible
[restic]: https://restic.net
